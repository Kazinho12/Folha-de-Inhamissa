<!DOCTYPE html>
<html lang="pt-MZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprenda | Folha de Inhamissa</title>
<link rel="icon" type="image/png" href="/Folhadeinhamissa.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
    --primary: #FFD700;
    --primary-dark: #FFC107;
    --primary-light: #FFE55C;
    --accent: #FFD700;
    --accent-dark: #FFC107;
    --text: #FFFFFF;
    --text-light: #b0b0b0;
    --text-lighter: #808080;
    --light: #1a1a1a;
    --lighter: #0a0a0a;
    --white: #000000;
    --gray: #333333;
    --dark-gray: #d0d0d0;
    --bg: #0a0a0a;
    --card-bg: #1a1a1a;
    --error: #e74c3c;
    --error-light: #fadbd8;
    --success: #2ecc71;
    --success-light: #d5f5e3;
    --warning: #f39c12;
    --info: #3498db;

    /* Cores das mat√©rias */
    --math-color: #e74c3c;
    --math-light: #fadbd8;
    --portuguese-color: #3498db;
    --portuguese-light: #d6eaf8;
    --history-color: #2ecc71;
    --history-light: #d5f5e3;
    --school-history-color: #9b59b6;
    --school-history-light: #e8daef;
    --geography-color: #f39c12;
    --geography-light: #fdebd0;
    --biology-color: #27ae60;
    --biology-light: #d4efdf;
    --physics-color: #8e44ad;
    --physics-light: #e8daef;
    --chemistry-color: #16a085;
    --chemistry-light: #d1f2eb;
    --civics-color: #c0392b;
    --civics-light: #fadbd8;
    --english-color: #2980b9;
    --english-light: #d6eaf8;

    --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --card-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --modal-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

    --border-radius-sm: 6px;
    --border-radius-md: 12px;
    --border-radius-lg: 16px;

    --transition: all 0.3s ease;
}

[data-theme="light"] {
    --primary: #FFD700;
    --primary-dark: #FFC107;
    --primary-light: #FFE55C;
    --accent: #FFD700;
    --accent-dark: #FFC107;
    --text: #1a1a1a;
    --text-light: #6b7280;
    --text-lighter: #9ca3af;
    --light: #f3f4f6;
    --lighter: #f8f9fa;
    --white: #FFFFFF;
    --gray: #e5e7eb;
    --dark-gray: #374151;
    --bg: #f8f9fa;
    --card-bg: #FFFFFF;
    --error: #e74c3c;
    --error-light: #fde8e8;
    --success: #2ecc71;
    --success-light: #ecfdf5;
    --warning: #f39c12;
    --info: #3498db;

    /* Cores das mat√©rias para tema claro */
    --math-color: #e74c3c;
    --math-light: #fde8e8;
    --portuguese-color: #3498db;
    --portuguese-light: #e3f2fd;
    --history-color: #2ecc71;
    --history-light: #ecfdf5;
    --school-history-color: #9b59b6;
    --school-history-light: #f3e5f5;
    --geography-color: #f39c12;
    --geography-light: #fff3e0;
    --biology-color: #27ae60;
    --biology-light: #e8f5e9;
    --physics-color: #8e44ad;
    --physics-light: #f3e5f5;
    --chemistry-color: #16a085;
    --chemistry-light: #d1f2eb;
    --civics-color: #c0392b;
    --civics-light: #fadbd8;
    --english-color: #2980b9;
    --english-light: #e3f2fd;

    --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --card-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --modal-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

body {
    background: linear-gradient(135deg, var(--bg) 0%, var(--card-bg) 100%);
    color: var(--text);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    line-height: 1.6;
    transition: background-color 0.3s, color 0.3s;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 0.75rem;
}

h1 { font-size: 2rem; }
h2 { font-size: 1.75rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.25rem; }
h5 { font-size: 1.1rem; }
h6 { font-size: 1rem; }

p {
    margin-bottom: 1rem;
}

a {
    color: var(--primary);
    text-decoration: none;
    transition: var(--transition);
}

a:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

/* App Bar */
.app-bar {
    position: fixed;
    top: 0;
    width: 100%;
    background-color: var(--white);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
}

.logo {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    color: var(--primary);
    text-decoration: none;
    font-size: 1.2rem;
}

.logo-icon {
    font-size: 1.5rem;
}

.app-bar-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text);
}

.app-bar-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.theme-toggle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--light);
    color: var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid var(--gray);
}

.theme-toggle:hover {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: var(--white);
    transform: rotate(180deg) scale(1.1);
}

.search-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
    background-color: var(--light);
    color: var(--text-light);
    border: none;
}

.search-btn:hover {
    background-color: var(--gray);
    color: var(--text);
}

/* Search Modal */
.search-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1001;
    padding-top: 80px;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.search-container {
    background-color: var(--white);
    max-width: 600px;
    margin: 0 auto;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    box-shadow: var(--modal-shadow);
    transform: translateY(0);
    transition: transform 0.3s ease;
}

.search-modal.active .search-container {
    transform: translateY(0);
}

.search-header {
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid var(--gray);
    background-color: var(--primary);
    color: white;
}

.search-input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid var(--gray);
    border-radius: 20px;
    font-size: 1rem;
    outline: none;
    transition: var(--transition);
}

.search-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

.close-search {
    font-size: 1.5rem;
    color: white;
    cursor: pointer;
    transition: var(--transition);
}

.close-search:hover {
    transform: scale(1.1);
}

.search-results {
    max-height: 70vh;
    overflow-y: auto;
    padding: 16px;
}

.search-result-item {
    padding: 12px;
    border-bottom: 1px solid var(--gray);
    cursor: pointer;
    transition: var(--transition);
    border-radius: var(--border-radius-sm);
}

.search-result-item:hover {
    background-color: var(--light);
}

.search-result-item:last-child {
    border-bottom: none;
}

/* Main Content */
.main-content {
    flex: 1;
    padding: 80px 16px 100px;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
}

.page-header {
    margin-bottom: 24px;
    text-align: center;
}

.page-title {
    font-size: 1.8rem;
    color: var(--primary-dark);
    margin-bottom: 8px;
}

.page-subtitle {
    color: var(--text-light);
    font-size: 1rem;
    max-width: 700px;
    margin: 0 auto;
}

/* Learning Modules */
.learning-modules {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.module-card {
    background: var(--white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: var(--card-shadow);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 100%;
    border: 1px solid rgba(255, 215, 0, 0.1);
    position: relative;
    animation: fadeInUp 0.5s ease-out;
}

.module-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.module-card:hover::before {
    transform: scaleX(1);
}

.module-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 215, 0, 0.3);
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.module-image {
    height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 3rem;
    position: relative;
    overflow: hidden;
}

.module-image::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.3));
}

.module-icon {
    z-index: 1;
}

.module-content {
    padding: 16px;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.module-title {
    font-size: 1.2rem;
    margin-bottom: 8px;
    font-weight: 600;
}

.module-description {
    color: var(--text-light);
    font-size: 0.9rem;
    margin-bottom: 12px;
    flex: 1;
}

.module-progress {
    height: 6px;
    background-color: var(--gray);
    border-radius: 3px;
    margin-bottom: 12px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%;
    transition: width 0.5s ease;
    position: relative;
}

.progress-bar::after {
    content: attr(data-progress);
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    color: white;
    font-size: 0.6rem;
    font-weight: bold;
}

.module-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: var(--text-light);
}

/* Module Colors */
.math-module .module-image {
    background-color: var(--math-color);
}
.math-module .module-title {
    color: var(--math-color);
}
.math-module .progress-bar {
    background-color: var(--math-color);
}

.portuguese-module .module-image {
    background-color: var(--portuguese-color);
}
.portuguese-module .module-title {
    color: var(--portuguese-color);
}
.portuguese-module .progress-bar {
    background-color: var(--portuguese-color);
}

.history-module .module-image {
    background-color: var(--history-color);
}
.history-module .module-title {
    color: var(--history-color);
}
.history-module .progress-bar {
    background-color: var(--history-color);
}

.school-history-module .module-image {
    background-color: var(--school-history-color);
}
.school-history-module .module-title {
    color: var(--school-history-color);
}
.school-history-module .progress-bar {
    background-color: var(--school-history-color);
}

.geography-module .module-image {
    background-color: var(--geography-color);
}
.geography-module .module-title {
    color: var(--geography-color);
}
.geography-module .progress-bar {
    background-color: var(--geography-color);
}

.biology-module .module-image {
    background-color: var(--biology-color);
}
.biology-module .module-title {
    color: var(--biology-color);
}
.biology-module .progress-bar {
    background-color: var(--biology-color);
}

.physics-module .module-image {
    background-color: var(--physics-color);
}
.physics-module .module-title {
    color: var(--physics-color);
}
.physics-module .progress-bar {
    background-color: var(--physics-color);
}

.chemistry-module .module-image {
    background-color: var(--chemistry-color);
}
.chemistry-module .module-title {
    color: var(--chemistry-color);
}
.chemistry-module .progress-bar {
    background-color: var(--chemistry-color);
}

.civics-module .module-image {
    background-color: var(--civics-color);
}
.civics-module .module-title {
    color: var(--civics-color);
}
.civics-module .progress-bar {
    background-color: var(--civics-color);
}

.english-module .module-image {
    background-color: var(--english-color);
}
.english-module .module-title {
    color: var(--english-color);
}
.english-module .progress-bar {
    background-color: var(--english-color);
}

/* Learning Modal */
.learning-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1001;
    overflow-y: auto;
    padding: 20px 0;
    animation: fadeIn 0.3s ease;
}

.learning-container {
    background-color: var(--white);
    max-width: 800px;
    margin: 0 auto;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    box-shadow: var(--modal-shadow);
    transform: translateY(0);
    transition: transform 0.3s ease;
}

.learning-header {
    padding: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    color: white;
    position: sticky;
    top: 0;
    z-index: 10;
}

.learning-title {
    font-size: 1.3rem;
    font-weight: 600;
}

.close-learning {
    font-size: 1.5rem;
    color: white;
    cursor: pointer;
    transition: var(--transition);
    background: none;
    border: none;
}

.close-learning:hover {
    transform: scale(1.1);
}

.learning-body {
    padding: 20px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.learning-content {
    margin-bottom: 20px;
}

.learning-section {
    margin-bottom: 30px;
}

.section-title {
    font-size: 1.2rem;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--gray);
    display: flex;
    align-items: center;
    gap: 10px;
}

.section-title::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 20px;
    border-radius: 4px;
}

.section-content {
    line-height: 1.7;
}

.section-content p {
    margin-bottom: 15px;
}

.section-content ul, .section-content ol {
    margin-bottom: 15px;
    padding-left: 20px;
}

.section-content li {
    margin-bottom: 8px;
}

.section-image {
    max-width: 100%;
    height: auto;
    border-radius: var(--border-radius-sm);
    margin: 15px 0;
    display: block;
    box-shadow: var(--card-shadow);
}

.vocabulary-table, .grammar-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    box-shadow: var(--card-shadow);
    border-radius: var(--border-radius-sm);
    overflow: hidden;
}

.vocabulary-table th, .grammar-table th {
    background-color: var(--primary);
    color: white;
    padding: 10px;
    text-align: left;
}

.vocabulary-table td, .grammar-table td {
    padding: 10px;
    border-bottom: 1px solid var(--gray);
}

.vocabulary-table tr:last-child td, .grammar-table tr:last-child td {
    border-bottom: none;
}

.vocabulary-table tr:nth-child(even), .grammar-table tr:nth-child(even) {
    background-color: var(--lighter);
}

/* Quiz Styles */
.quiz-container {
    background-color: var(--lighter);
    padding: 20px;
    border-radius: var(--border-radius-sm);
    margin-top: 25px;
    border: 1px solid var(--gray);
}

.quiz-question {
    font-weight: 600;
    margin-bottom: 15px;
    font-size: 1.1rem;
}

.quiz-options {
    margin-bottom: 15px;
    display: grid;
    gap: 10px;
}

.quiz-option {
    display: block;
    padding: 12px 15px;
    background-color: var(--white);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: var(--transition);
    border: 1px solid var(--gray);
    font-size: 0.95rem;
}

.quiz-option:hover {
    background-color: var(--light);
    border-color: var(--primary-light);
}

.quiz-option.correct {
    background-color: var(--success);
    color: white;
    border-color: var(--success);
}

.quiz-option.incorrect {
    background-color: var(--error);
    color: white;
    border-color: var(--error);
}

.quiz-feedback {
    margin-top: 10px;
    padding: 12px;
    border-radius: var(--border-radius-sm);
    font-size: 0.9rem;
    display: none;
}

.quiz-feedback.correct {
    background-color: var(--success-light);
    color: var(--success);
    display: block;
    border-left: 4px solid var(--success);
}

.quiz-feedback.incorrect {
    background-color: var(--error-light);
    color: var(--error);
    display: block;
    border-left: 4px solid var(--error);
}

.quiz-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

.quiz-btn {
    padding: 10px 20px;
    border-radius: var(--border-radius-sm);
    border: none;
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition);
    font-size: 0.9rem;
}

.quiz-next {
    background-color: var(--primary);
    color: white;
    margin-left: auto;
}

.quiz-next:hover {
    background-color: var(--primary-dark);
}

.quiz-finish {
    background-color: var(--success);
    color: white;
    display: none;
}

.quiz-finish:hover {
    background-color: #27ae60;
}

.quiz-results {
    margin-top: 20px;
    padding: 15px;
    border-radius: var(--border-radius-sm);
    background-color: var(--light);
    display: none;
    text-align: center;
}

.quiz-final-result {
    font-weight: 500;
    font-size: 1.1rem;
}

/* Modal Colors */
.math-modal .learning-header {
    background-color: var(--math-color);
}
.math-modal .section-title {
    color: var(--math-color);
}
.math-modal .section-title::before {
    background-color: var(--math-color);
}

.portuguese-modal .learning-header {
    background-color: var(--portuguese-color);
}
.portuguese-modal .section-title {
    color: var(--portuguese-color);
}
.portuguese-modal .section-title::before {
    background-color: var(--portuguese-color);
}

.history-modal .learning-header {
    background-color: var(--history-color);
}
.history-modal .section-title {
    color: var(--history-color);
}
.history-modal .section-title::before {
    background-color: var(--history-color);
}

.school-history-modal .learning-header {
    background-color: var(--school-history-color);
}
.school-history-modal .section-title {
    color: var(--school-history-color);
}
.school-history-modal .section-title::before {
    background-color: var(--school-history-color);
}

.geography-modal .learning-header {
    background-color: var(--geography-color);
}
.geography-modal .section-title {
    color: var(--geography-color);
}
.geography-modal .section-title::before {
    background-color: var(--geography-color);
}

.biology-modal .learning-header {
    background-color: var(--biology-color);
}
.biology-modal .section-title {
    color: var(--biology-color);
}
.biology-modal .section-title::before {
    background-color: var(--biology-color);
}

.physics-modal .learning-header {
    background-color: var(--physics-color);
}
.physics-modal .section-title {
    color: var(--physics-color);
}
.physics-modal .section-title::before {
    background-color: var(--physics-color);
}

.chemistry-modal .learning-header {
    background-color: var(--chemistry-color);
}
.chemistry-modal .section-title {
    color: var(--chemistry-color);
}
.chemistry-modal .section-title::before {
    background-color: var(--chemistry-color);
}

.civics-modal .learning-header {
    background-color: var(--civics-color);
}
.civics-modal .section-title {
    color: var(--civics-color);
}
.civics-modal .section-title::before {
    background-color: var(--civics-color);
}

.english-modal .learning-header {
    background-color: var(--english-color);
}
.english-modal .section-title {
    color: var(--english-color);
}
.english-modal .section-title::before {
    background-color: var(--english-color);
}

/* Bottom Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background-color: var(--white);
    box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.1);
    display: flex;
    padding: 8px 0;
    z-index: 1000;
}

.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    text-decoration: none;
    font-size: 0.7rem;
    gap: 4px;
    transition: var(--transition);
    padding: 5px 0;
}

.nav-item.active {
    color: var(--primary);
}

.nav-item:hover {
    color: var(--primary);
}

.nav-icon {
    font-size: 1.2rem;
}

/* Responsive Design */
@media (min-width: 768px) {
    .main-content {
        padding: 90px 24px 24px;
    }

    .bottom-nav {
        display: none;
    }

    .learning-modules {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    }

    .learning-container {
        max-width: 900px;
    }
}

@media (max-width: 480px) {
    .learning-modules {
        grid-template-columns: 1fr;
    }

    .module-card {
        max-width: 100%;
    }

    .quiz-options {
        grid-template-columns: 1fr;
    }
}

/* Utility Classes */
.text-center {
    text-align: center;
}

.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mb-4 { margin-bottom: 2rem; }

.hidden {
    display: none !important;
}
    </style>
</head>
<body>
    <!-- App Bar -->
    <header class="app-bar">
        <a href="home.html" class="logo">
            <i class="fas fa-graduation-cap logo-icon"></i>
            <span>Folha de Inhamissa</span>
        </a>
        <h1 class="app-bar-title">Aprenda</h1>
        <div class="app-bar-actions">
            <div class="theme-toggle" id="theme-toggle">
                <i class="fas fa-sun" id="theme-icon"></i>
            </div>
            <div class="search-btn" id="search-btn">
                <i class="fas fa-search"></i>
            </div>
            <div class="user-avatar" id="user-avatar" style="width: 40px; height: 40px; border-radius: 50%; background-color: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; margin-left: 10px;">
                <span id="avatar-initials">U</span>
            </div>
        </div>
    </header>

    <!-- Search Modal -->
    <div class="search-modal" id="search-modal">
        <div class="search-container">
            <div class="search-header">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="search-input" placeholder="Pesquisar...">
                <div class="close-search" id="close-search">&times;</div>
            </div>
            <div class="search-results" id="search-results">
                <div class="search-result-item">
                    <p>Funcionalidade de pesquisa em desenvolvimento</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Aprenda Conosco</h1>
            <p class="page-subtitle">Conhecimento para todas as idades e n√≠veis</p>
        </div>

        <!-- Quizzes da Comunidade -->
        <div id="community-quizzes" style="margin-bottom: 40px;"></div>
    </main>



    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="home.html" class="nav-item">
            <i class="fas fa-home nav-icon"></i>
            <span>In√≠cio</span>
        </a>
        <a href="aprenda.html" class="nav-item active">
            <i class="fas fa-book nav-icon"></i>
            <span>Aprenda</span>
        </a>
        <a href="horarios.html" class="nav-item">
            <i class="fas fa-calendar-alt nav-icon"></i>
            <span>Hor√°rios</span>
        </a>
        <a href="noticias.html" class="nav-item">
            <i class="fas fa-newspaper nav-icon"></i>
            <span>Not√≠cias</span>
        </a>
    </nav>

    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
        import { getFirestore, collection, query, where, orderBy, limit, getDocs, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBJ8CVC2s_cb8nBdbrhPCbVbqqh6Cb9Vco",
            authDomain: "luna-bot-70962.firebaseapp.com",
            projectId: "luna-bot-70962",
            storageBucket: "luna-bot-70962.appspot.com",
            messagingSenderId: "247837414432",
            appId: "1:247837414432:web:f7f9df049b8cfdbd909845"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const authAprenda = getAuth(app);

        // Tema - Sistema completo com Firebase
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');

        // Fun√ß√£o para aplicar tema
        function applyTheme(theme) {
            if (theme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
                themeIcon.className = 'fas fa-moon';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.className = 'fas fa-sun';
            }
        }

        // Fun√ß√£o para carregar tema do Firebase
        async function loadThemePreference(userUid) {
            try {
                const usersQuery = query(
                    collection(db, 'users'),
                    where('uid', '==', userUid),
                    limit(1)
                );
                const usersSnapshot = await getDocs(usersQuery);
                
                if (!usersSnapshot.empty) {
                    const userData = usersSnapshot.docs[0].data();
                    const theme = userData.theme || 'dark';
                    applyTheme(theme);
                    return theme;
                }
            } catch (error) {
                console.warn('Erro ao carregar prefer√™ncia de tema:', error);
            }
            applyTheme('dark');
            return 'dark';
        }

        // Fun√ß√£o para salvar tema no Firebase
        async function saveThemePreference(userUid, theme) {
            try {
                const usersQuery = query(
                    collection(db, 'users'),
                    where('uid', '==', userUid),
                    limit(1)
                );
                const usersSnapshot = await getDocs(usersQuery);
                
                if (!usersSnapshot.empty) {
                    const userDocRef = doc(db, 'users', usersSnapshot.docs[0].id);
                    await updateDoc(userDocRef, { theme });
                }
            } catch (error) {
                console.warn('Erro ao salvar prefer√™ncia de tema:', error);
            }
        }

        // Toggle de tema
        themeToggle.addEventListener('click', async () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme(newTheme);

            const auth = getAuth();
            if (auth.currentUser) {
                await saveThemePreference(auth.currentUser.uid, newTheme);
            }
        });

        // Carregar quizzes da comunidade
        async function loadCommunityQuizzes() {
            try {
                const quizzesQuery = query(collection(db, 'quizzes'), orderBy('createdAt', 'desc'), limit(20));
                const quizzesSnapshot = await getDocs(quizzesQuery);

                const container = document.getElementById('community-quizzes');

                if (!quizzesSnapshot.empty) {
                    container.innerHTML = '<h2 style="margin-bottom: 20px; color: var(--primary);">Quizzes da Comunidade</h2><div class="learning-modules" id="quiz-grid"></div>';
                    const quizGrid = document.getElementById('quiz-grid');

                    quizzesSnapshot.forEach((doc) => {
                        const quiz = doc.data();
                        const quizCard = document.createElement('div');
                        quizCard.className = 'module-card';
                        quizCard.innerHTML = `
                            <div class="module-image" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); position: relative;">
                                ${quiz.imageUrl ? `<img src="${quiz.imageUrl}" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">` : `<i class="fas fa-question-circle"></i>`}
                            </div>
                            <div class="module-content">
                                <h3 class="module-title">${quiz.title}</h3>
                                <p class="module-description">${quiz.description}</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 12px; font-size: 0.85rem; color: var(--text-light);">
                                    <span><i class="fas fa-user"></i> ${quiz.authorName}</span>
                                    <span><i class="fas fa-calendar"></i> ${quiz.createdAt ? new Date(quiz.createdAt.toDate()).toLocaleDateString('pt-MZ') : 'Hoje'}</span>
                                </div>
                                <div style="margin-top: 8px; font-size: 0.85rem; color: var(--text-light);">
                                    <i class="fas fa-question"></i> ${quiz.questions.length} perguntas
                                </div>
                            </div>
                        `;

                        quizCard.addEventListener('click', () => {
                            openQuizModal(quiz, doc.id);
                        });

                        quizGrid.appendChild(quizCard);
                    });
                }
            } catch (error) {
                console.error('Erro ao carregar quizzes:', error);
            }
        }

        function openQuizModal(quiz, quizId) {
            const modal = document.createElement('div');
            modal.className = 'learning-modal';
            modal.style.display = 'block';

            let questionsHTML = '';
            quiz.questions.forEach((q, index) => {
                const displayStyle = index === 0 ? 'block' : 'none';
                questionsHTML += `
                    <div class="quiz-question-group" data-question-index="${index}" data-explanation="${q.explanation || ''}" style="display:${displayStyle}">
                        <div class="quiz-question">${index + 1}. ${q.question}</div>
                        <div class="quiz-options">
                            ${q.options.map((opt, optIndex) => `
                                <div class="quiz-option" data-question="${index}" data-correct="${optIndex === q.correctIndex ? 'true' : 'false'}">${opt}</div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            modal.innerHTML = `
                <div class="learning-container">
                    <div class="learning-header" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #000;">
                        <h2 class="learning-title">${quiz.title}</h2>
                        <div class="close-learning" style="color: #000;">&times;</div>
                    </div>
                    <div class="learning-body">
                        <p style="margin-bottom: 20px;">${quiz.description}</p>
                        <div class="quiz-container" id="quiz-${quizId}" data-total-questions="${quiz.questions.length}">
                            ${questionsHTML}
                            <div class="quiz-actions" style="margin-top: 20px;">
                                <button class="quiz-btn quiz-next" style="display:none; background-color: var(--primary); color: #000;">Pr√≥xima</button>
                                <button class="quiz-btn quiz-finish" style="display:none; background-color: var(--success); color: white;">Finalizar</button>
                            </div>
                            <div class="quiz-results" style="display:none"></div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            modal.querySelector('.close-learning').addEventListener('click', () => {
                modal.remove();
            });

            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });

            // Inicializar quiz com l√≥gica melhorada
            initCommunityQuiz(quizId, quiz.questions.length);
        }

        function initCommunityQuiz(quizId, totalQuestions) {
            const quizContainer = document.getElementById(`quiz-${quizId}`);
            if (!quizContainer) return;

            const nextBtn = quizContainer.querySelector('.quiz-next');
            const finishBtn = quizContainer.querySelector('.quiz-finish');
            const resultsDiv = quizContainer.querySelector('.quiz-results');

            let currentQuestion = 0;
            let score = 0;
            let answered = false;
            let userAnswers = [];

            // Event listener para as op√ß√µes
            const options = quizContainer.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = parseInt(this.getAttribute('data-question'));
                    if (questionIndex !== currentQuestion || answered) return;

                    const isCorrect = this.getAttribute('data-correct') === 'true';
                    const questionGroup = quizContainer.querySelector(`[data-question-index="${currentQuestion}"]`);
                    const explanation = questionGroup?.getAttribute('data-explanation') || '';

                    // Armazenar resposta do usu√°rio
                    userAnswers[currentQuestion] = {
                        selected: this.textContent.trim(),
                        isCorrect: isCorrect,
                        explanation: explanation
                    };

                    if (isCorrect) {
                        score++;
                        this.style.backgroundColor = 'var(--success)';
                        this.style.color = 'white';
                    } else {
                        this.style.backgroundColor = 'var(--error)';
                        this.style.color = 'white';
                        
                        // Destacar resposta correta
                        const correctOption = quizContainer.querySelector(`.quiz-option[data-question="${currentQuestion}"][data-correct="true"]`);
                        if (correctOption) {
                            correctOption.style.backgroundColor = 'var(--success)';
                            correctOption.style.color = 'white';
                        }
                    }

                    // Remover feedback existente antes de adicionar novo
                    const existingFeedback = questionGroup.querySelector('.quiz-feedback-explanation');
                    if (existingFeedback) {
                        existingFeedback.remove();
                    }

                    // Mostrar justifica√ß√£o
                    if (explanation && explanation.trim() !== '') {
                        const feedbackDiv = document.createElement('div');
                        feedbackDiv.className = 'quiz-feedback-explanation';
                        feedbackDiv.style.marginTop = '12px';
                        feedbackDiv.style.padding = '12px';
                        feedbackDiv.style.borderRadius = '8px';
                        feedbackDiv.style.backgroundColor = isCorrect ? 'var(--success-light)' : 'var(--error-light)';
                        feedbackDiv.style.color = 'var(--text)';
                        feedbackDiv.style.borderLeft = `4px solid ${isCorrect ? 'var(--success)' : 'var(--error)'}`;
                        feedbackDiv.style.display = 'block';
                        feedbackDiv.innerHTML = `<strong>${isCorrect ? '‚úÖ Correto!' : '‚ùå Incorreto'}</strong><br>${explanation}`;
                        
                        // Adicionar ap√≥s as op√ß√µes da pergunta
                        questionGroup.appendChild(feedbackDiv);
                    } else if (!isCorrect) {
                        // Se n√£o tiver explica√ß√£o mas errou, mostrar mensagem padr√£o
                        const feedbackDiv = document.createElement('div');
                        feedbackDiv.className = 'quiz-feedback-explanation';
                        feedbackDiv.style.marginTop = '12px';
                        feedbackDiv.style.padding = '12px';
                        feedbackDiv.style.borderRadius = '8px';
                        feedbackDiv.style.backgroundColor = 'var(--error-light)';
                        feedbackDiv.style.color = 'var(--text)';
                        feedbackDiv.style.borderLeft = '4px solid var(--error)';
                        feedbackDiv.style.display = 'block';
                        feedbackDiv.innerHTML = '<strong>‚ùå Incorreto</strong><br>A resposta correta est√° destacada em verde.';
                        
                        questionGroup.appendChild(feedbackDiv);
                    } else if (isCorrect) {
                        // Mesmo que acerte, mostrar confirma√ß√£o
                        const feedbackDiv = document.createElement('div');
                        feedbackDiv.className = 'quiz-feedback-explanation';
                        feedbackDiv.style.marginTop = '12px';
                        feedbackDiv.style.padding = '12px';
                        feedbackDiv.style.borderRadius = '8px';
                        feedbackDiv.style.backgroundColor = 'var(--success-light)';
                        feedbackDiv.style.color = 'var(--text)';
                        feedbackDiv.style.borderLeft = '4px solid var(--success)';
                        feedbackDiv.style.display = 'block';
                        feedbackDiv.innerHTML = '<strong>‚úÖ Correto!</strong><br>Parab√©ns, voc√™ acertou!';
                        
                        questionGroup.appendChild(feedbackDiv);
                    }

                    answered = true;

                    // Mostrar bot√£o apropriado
                    if (currentQuestion < totalQuestions - 1) {
                        nextBtn.style.display = 'inline-block';
                    } else {
                        finishBtn.style.display = 'inline-block';
                    }

                    // Desabilitar todas as op√ß√µes da pergunta atual
                    const currentOptions = quizContainer.querySelectorAll(`.quiz-option[data-question="${currentQuestion}"]`);
                    currentOptions.forEach(opt => {
                        opt.style.pointerEvents = 'none';
                    });
                });
            });

            // Pr√≥xima pergunta
            nextBtn.addEventListener('click', () => {
                currentQuestion++;
                answered = false;
                nextBtn.style.display = 'none';

                // Esconder pergunta atual
                const currentGroup = quizContainer.querySelector(`[data-question-index="${currentQuestion - 1}"]`);
                if (currentGroup) currentGroup.style.display = 'none';

                // Mostrar pr√≥xima pergunta
                const nextGroup = quizContainer.querySelector(`[data-question-index="${currentQuestion}"]`);
                if (nextGroup) nextGroup.style.display = 'block';
            });

            // Finalizar quiz
            finishBtn.addEventListener('click', () => {
                const percentage = Math.round((score / totalQuestions) * 100);
                let message = '';

                if (percentage >= 80) {
                    message = `üéâ Excelente! Voc√™ acertou ${score} de ${totalQuestions} perguntas (${percentage}%).`;
                } else if (percentage >= 60) {
                    message = `üëè Bom trabalho! Voc√™ acertou ${score} de ${totalQuestions} perguntas (${percentage}%).`;
                } else if (percentage >= 40) {
                    message = `üìö Voc√™ acertou ${score} de ${totalQuestions} perguntas (${percentage}%). Continue estudando!`;
                } else {
                    message = `üí™ Voc√™ acertou ${score} de ${totalQuestions} perguntas (${percentage}%). N√£o desista, revise o material!`;
                }

                // Bot√£o de certificado se passou (>= 70%)
                let certificateBtn = '';
                if (percentage >= 70) {
                    const quizTitle = quizContainer.closest('.learning-container')?.querySelector('.learning-title')?.textContent || 'Quiz';
                    certificateBtn = `<button onclick="downloadCertificate('${quizTitle}', ${score}, ${totalQuestions}, ${percentage})" style="margin-top: 15px; padding: 10px 20px; background-color: var(--primary); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;"><i class="fas fa-download"></i> Baixar Certificado</button>`;
                }

                resultsDiv.innerHTML = `<div class="quiz-final-result" style="text-align:center; padding:20px;">${message}${certificateBtn}</div>`;
                resultsDiv.style.display = 'block';
                finishBtn.style.display = 'none';

                // Esconder todas as perguntas
                quizContainer.querySelectorAll('.quiz-question-group').forEach(group => {
                    group.style.display = 'none';
                });
            });
        }

        loadCommunityQuizzes();

        // Fun√ß√£o global para download de certificado
        window.downloadCertificate = function(quizTitle, score, total, percentage) {
            const userName = localStorage.getItem('userName') || 'Estudante';
            const userClass = localStorage.getItem('userClass') || '';
            const userTurma = localStorage.getItem('userTurma') || '';

            console.log('üìÑ Gerando certificado com dados:', {
                userName,
                userClass,
                userTurma,
                quizTitle,
                score,
                total,
                percentage
            });

            const canvas = document.createElement('canvas');
            canvas.width = 1200;
            canvas.height = 900;
            const ctx = canvas.getContext('2d');

            // Fundo preto
            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Borda externa dourada
            ctx.strokeStyle = '#FFD700';
            ctx.lineWidth = 20;
            ctx.strokeRect(25, 25, canvas.width - 50, canvas.height - 50);

            // Borda interna dourada
            ctx.strokeStyle = '#FFD700';
            ctx.lineWidth = 8;
            ctx.strokeRect(45, 45, canvas.width - 90, canvas.height - 90);

            // üèÖ √çCONE DE MEDALHA COM ESTRELAS NO TOPO
            ctx.font = '80px Arial, sans-serif';
            ctx.textAlign = 'center';
            
            // Estrela esquerda
            ctx.fillText('‚≠ê', canvas.width / 2 - 150, 120);
            
            // Medalha central
            ctx.fillText('üèÖ', canvas.width / 2, 120);
            
            // Estrela direita
            ctx.fillText('‚≠ê', canvas.width / 2 + 150, 120);

            // T√≠tulo "CERTIFICADO"
            ctx.fillStyle = '#FFD700';
            ctx.font = 'bold 70px Inter, Arial, sans-serif';
            ctx.fillText('CERTIFICADO', canvas.width / 2, 210);


            // Certificamos que
            ctx.fillStyle = '#CCCCCC';
            ctx.font = '24px Inter, Arial, sans-serif';
            ctx.fillText('Certificamos que', canvas.width / 2, 310);

            // Nome do usu√°rio em dourado
            ctx.fillStyle = '#FFD700';
            ctx.font = 'bold 44px Inter, Arial, sans-serif';
            ctx.fillText(userName, canvas.width / 2, 365);

            // Classe e Turma (logo abaixo do nome)
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '24px Inter, Arial, sans-serif';
            
            let classeInfo = '';
            if (userClass && userClass.trim() !== '') {
                classeInfo = `${userClass}¬™ Classe`;
            }
            if (userTurma && userTurma.trim() !== '') {
                classeInfo += classeInfo ? ` - Turma ${userTurma}` : `Turma ${userTurma}`;
            }
            
            if (classeInfo) {
                ctx.fillText(classeInfo, canvas.width / 2, 405);
            }

            // Texto "Concluiu com sucesso o quiz:"
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '24px Inter, Arial, sans-serif';
            const yOffsetQuiz = classeInfo ? 450 : 430;
            ctx.fillText('Concluiu com sucesso o quiz:', canvas.width / 2, yOffsetQuiz);

            // T√≠tulo do quiz em branco
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 30px Inter, Arial, sans-serif';
            ctx.fillText(quizTitle.toUpperCase(), canvas.width / 2, yOffsetQuiz + 45);

            // Pontua√ß√£o em dourado
            ctx.fillStyle = '#FFD700';
            ctx.font = 'bold 48px Inter, Arial, sans-serif';
            ctx.fillText(`${score} de ${total} (${percentage}%)`, canvas.width / 2, yOffsetQuiz + 115);

            // Data
            const dataAtual = new Date().toLocaleDateString('pt-MZ', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric' 
            });
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '22px Inter, Arial, sans-serif';
            ctx.fillText(`Data: ${dataAtual}`, canvas.width / 2, yOffsetQuiz + 170);

            // Barra horizontal dourada (acima da assinatura)
            ctx.strokeStyle = '#FFD700';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(300, yOffsetQuiz + 230);
            ctx.lineTo(900, yOffsetQuiz + 230);
            ctx.stroke();

            // Assinado por "Folha de Inhamissa"
            ctx.fillStyle = '#FFD700';
            ctx.font = 'italic 26px Inter, Arial, sans-serif';
            ctx.fillText('Folha de Inhamissa', canvas.width / 2, yOffsetQuiz + 270);

            // Nome da escola no fundo
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 24px Inter, Arial, sans-serif';
            ctx.fillText('Escola Secund√°ria de Inhamissa', canvas.width / 2, yOffsetQuiz + 320);
            
            // Localiza√ß√£o em branco
            ctx.fillStyle = '#CCCCCC';
            ctx.font = '20px Inter, Arial, sans-serif';
            ctx.fillText('Xai-Xai, Gaza, Mo√ßambique', canvas.width / 2, yOffsetQuiz + 355);

            // Download
            const link = document.createElement('a');
            link.download = `certificado-${quizTitle}-${dataAtual.replace(/\//g, '-')}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            console.log('‚úÖ Certificado gerado e download iniciado');
        };

        // Carregar avatar e dados do usu√°rio
        onAuthStateChanged(getAuth(), async (user) => {
            if (user) {
                try {
                    console.log('üîç Carregando dados do usu√°rio em aprenda.html');
                    
                    // Buscar documento do usu√°rio usando where clause
                    const usersQuery = query(
                        collection(db, 'users'),
                        where('uid', '==', user.uid),
                        limit(1)
                    );
                    
                    const usersSnapshot = await getDocs(usersQuery);
                    let userData = null;

                    if (!usersSnapshot.empty) {
                        userData = usersSnapshot.docs[0].data();
                        console.log('‚úÖ Dados do usu√°rio encontrados:', userData);
                    } else {
                        // Fallback: dados do Firebase Auth
                        userData = {
                            name: user.displayName || 'Usu√°rio',
                            email: user.email,
                            photoURL: user.photoURL || null,
                            class: '',
                            turma: ''
                        };
                        console.log('‚ÑπÔ∏è Usando dados do Firebase Auth (documento n√£o encontrado no Firestore)');
                    }

                    // Buscar classe e turma (verificando varia√ß√µes de nome dos campos)
                    const userClass = userData.class || userData.classe || '';
                    const userTurma = userData.turma || userData.turno || '';
                    
                    // Salvar no localStorage para certificados
                    localStorage.setItem('userName', userData.name || user.displayName || 'Estudante');
                    localStorage.setItem('userClass', userClass);
                    localStorage.setItem('userTurma', userTurma);
                    
                    console.log('üíæ Dados salvos no localStorage:', {
                        userName: localStorage.getItem('userName'),
                        userClass: localStorage.getItem('userClass'),
                        userTurma: localStorage.getItem('userTurma')
                    });

                    // Atualizar avatar
                    const userAvatar = document.getElementById('user-avatar');
                    const avatarInitials = document.getElementById('avatar-initials');

                    const initials = userData.name ? 
                        userData.name.split(' ').map(n => n[0]).join('').toUpperCase() : 
                        user.email[0].toUpperCase();

                    if (userData.photoURL) {
                        userAvatar.innerHTML = `<img src="${userData.photoURL}" alt="Avatar" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" onerror="this.style.display='none'; this.parentElement.querySelector('span').style.display='flex';">
                        <span style="display: none;">${initials}</span>`;
                    } else {
                        if (avatarInitials) {
                            avatarInitials.textContent = initials;
                        }
                    }

                    // Carregar tema
                    await loadThemePreference(user.uid);

                } catch (error) {
                    console.error('‚ùå Erro ao carregar usu√°rio:', error);
                }
            } else {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme) {
                    applyTheme(savedTheme);
                } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                    applyTheme('light');
                } else {
                    applyTheme('dark');
                }
            }
        });
    </script>
    <script>
// DOM Elements
const searchBtn = document.getElementById('search-btn');
const searchModal = document.getElementById('search-modal');

// Tema - Sistema completo com Firebase
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');

        // Fun√ß√£o para aplicar tema
        function applyTheme(theme) {
            if (theme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
                themeIcon.className = 'fas fa-moon';
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.className = 'fas fa-sun';
            }
        }

        // Fun√ß√£o para carregar tema do Firebase
        async function loadThemePreference(userUid) {
            try {
                const usersQuery = query(
                    collection(db, 'users'),
                    where('uid', '==', userUid),
                    limit(1)
                );
                const usersSnapshot = await getDocs(usersQuery);
                
                if (!usersSnapshot.empty) {
                    const userData = usersSnapshot.docs[0].data();
                    const theme = userData.theme || 'dark';
                    applyTheme(theme);
                    return theme;
                }
            } catch (error) {
                console.warn('Erro ao carregar prefer√™ncia de tema:', error);
            }
            applyTheme('dark');
            return 'dark';
        }

        // Fun√ß√£o para salvar tema no Firebase
        async function saveThemePreference(userUid, theme) {
            try {
                const usersQuery = query(
                    collection(db, 'users'),
                    where('uid', '==', userUid),
                    limit(1)
                );
                const usersSnapshot = await getDocs(usersQuery);
                
                if (!usersSnapshot.empty) {
                    const userDocRef = doc(db, 'users', usersSnapshot.docs[0].id);
                    await updateDoc(userDocRef, { theme });
                }
            } catch (error) {
                console.warn('Erro ao salvar prefer√™ncia de tema:', error);
            }
        }

        // Toggle de tema
        themeToggle.addEventListener('click', async () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme(newTheme);

            const auth = getAuth();
            if (auth.currentUser) {
                await saveThemePreference(auth.currentUser.uid, newTheme);
            }
        });
const closeSearchBtn = document.getElementById('close-search');

if (searchBtn) {
    searchBtn.addEventListener('click', () => {
        searchModal.style.display = 'block';
    });
}

if (closeSearchBtn) {
    closeSearchBtn.addEventListener('click', () => {
        searchModal.style.display = 'none';
    });
}

window.addEventListener('click', (event) => {
    if (event.target === searchModal) searchModal.style.display = 'none';
});

// Improved Quiz functionality
window.initQuizzes = function() {
    const quizzes = document.querySelectorAll('.quiz-container');

    quizzes.forEach(quiz => {
        const questions = quiz.querySelectorAll('.quiz-question');
        const nextBtn = quiz.querySelector('.quiz-btn.quiz-next');
        const finishBtn = quiz.querySelector('.quiz-btn.quiz-finish');
        const resultsDiv = quiz.querySelector('.quiz-results');
        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let userAnswers = []; // Armazenar respostas do usu√°rio

        // Show first question
        showQuestion(currentQuestion);

        // Option click handler
        quiz.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                if (answered) return;

                const isCorrect = this.getAttribute('data-correct') === 'true';
                const questionIndex = Array.from(questions).findIndex(q => 
                    q.nextElementSibling === this.parentElement
                );
                
                const correctOption = this.parentElement.querySelector('[data-correct="true"]');

                // Armazenar resposta do usu√°rio
                userAnswers[questionIndex] = {
                    selected: this.textContent.trim(),
                    isCorrect: isCorrect,
                    correctAnswer: correctOption.textContent.trim()
                };

                if (isCorrect) {
                    score++;
                }

                answered = true;
                nextBtn.style.display = 'inline-block';

                // Marcar op√ß√£o selecionada e mostrar feedback
                const feedbackDiv = this.parentElement.nextElementSibling;
                if (feedbackDiv && feedbackDiv.classList.contains('quiz-feedback')) {
                    if (isCorrect) {
                        this.classList.add('correct');
                        feedbackDiv.className = 'quiz-feedback correct';
                        feedbackDiv.innerHTML = '<strong>‚úì Correto!</strong> Parab√©ns, voc√™ acertou!';
                        feedbackDiv.style.display = 'block';
                    } else {
                        this.classList.add('incorrect');
                        correctOption.classList.add('correct');
                        feedbackDiv.className = 'quiz-feedback incorrect';
                        feedbackDiv.innerHTML = `<strong>‚úó Incorreto!</strong> A resposta correta √©: <strong>${correctOption.textContent.trim()}</strong>`;
                        feedbackDiv.style.display = 'block';
                    }
                }

                // Disable all options after answer
                const options = this.parentElement.querySelectorAll('.quiz-option');
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
            });
        });

        // Next question handler
        nextBtn.addEventListener('click', function() {
            currentQuestion++;
            answered = false;

            if (currentQuestion < questions.length) {
                showQuestion(currentQuestion);
                this.style.display = 'none';

                if (currentQuestion === questions.length - 1) {
                    finishBtn.style.display = 'inline-block';
                }
            }
        });

        // Finish quiz handler
        finishBtn.addEventListener('click', function() {
            const percentage = Math.round((score / questions.length) * 100);
            let message = '';

            if (percentage >= 80) {
                message = `Excelente! Voc√™ acertou ${score} de ${questions.length} perguntas (${percentage}%).`;
            } else if (percentage >= 60) {
                message = `Bom trabalho! Voc√™ acertou ${score} de ${questions.length} perguntas (${percentage}%).`;
            } else if (percentage >= 40) {
                message = `Voc√™ acertou ${score} de ${questions.length} perguntas (${percentage}%). Estude mais um pouco!`;
            } else {
                message = `Voc√™ acertou ${score} de ${questions.length} perguntas (${percentage}%). Recomendamos revisar o material.`;
            }

            // Mostrar resumo de respostas
            let reviewHTML = '<div style="margin-top: 20px; text-align: left;">';
            reviewHTML += '<h3 style="color: var(--primary); margin-bottom: 15px;">Revis√£o das Respostas:</h3>';

            userAnswers.forEach((answer, index) => {
                const questionText = questions[index].textContent.replace(/^\d+\.\s*/, '');
                const statusIcon = answer.isCorrect ? '‚úÖ' : '‚ùå';
                const statusColor = answer.isCorrect ? 'var(--success)' : 'var(--error)';

                reviewHTML += `
                    <div style="margin-bottom: 15px; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid ${statusColor};">
                        <div style="font-weight: 600; margin-bottom: 5px;">${statusIcon} ${questionText}</div>
                        <div style="color: #888; font-size: 0.9rem;">Sua resposta: ${answer.selected}</div>
                        ${!answer.isCorrect ? `<div style="color: var(--success); font-size: 0.9rem;">Resposta correta: ${answer.correctAnswer}</div>` : ''}
                    </div>
                `;
            });

            reviewHTML += '</div>';

            // Adicionar bot√£o de download de certificado se passou (>= 70%)
            let certificateBtn = '';
            if (percentage >= 70) {
                const quizId = quiz.id || 'quiz';
                certificateBtn = `<button onclick="downloadCertificate('${quizId}', ${score}, ${questions.length}, ${percentage})" style="margin-top: 15px; padding: 10px 20px; background-color: var(--primary); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;"><i class="fas fa-download"></i> Baixar Certificado</button>`;
            }

            resultsDiv.innerHTML = `<div class="quiz-final-result">${message}${reviewHTML}${certificateBtn}</div>`;
            resultsDiv.style.display = 'block';
            this.style.display = 'none';
            nextBtn.style.display = 'none';

            // Update progress in local storage
            updateProgress(quiz.id.replace('-quiz', ''), percentage);
        });

        function showQuestion(index) {
            // Hide all questions
            questions.forEach((q, i) => {
                q.style.display = 'none';
                q.nextElementSibling.style.display = 'none'; // options
                if (q.nextElementSibling.nextElementSibling) {
                    q.nextElementSibling.nextElementSibling.style.display = 'none'; // feedback
                }
            });

            // Show current question
            questions[index].style.display = 'block';
            questions[index].nextElementSibling.style.display = 'block';

            // Enable options for current question
            const options = questions[index].nextElementSibling.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'auto';
                opt.classList.remove('correct', 'incorrect');
                opt.style.backgroundColor = '';
                opt.style.borderColor = '';
            });
        }
    });
}

// Fun√ß√£o para atualizar progresso do usu√°rio
function updateProgress(subject, percentage) {
    let progress = JSON.parse(localStorage.getItem('learningProgress')) || {};
    progress[subject] = percentage;
    localStorage.setItem('learningProgress', JSON.stringify(progress));

    const progressBar = document.getElementById(`${subject}-progress`);
    if (progressBar) {
        progressBar.style.width = `${percentage}%`;
        progressBar.textContent = `${percentage}%`;
    }
}

// Conte√∫do e quizzes para Matem√°tica
const matematicaContent = [
    {
        title: "N√∫meros e Opera√ß√µes B√°sicas",
        content: `
            <h4>Conceitos Fundamentais</h4>
            <p>As opera√ß√µes b√°sicas da matem√°tica incluem adi√ß√£o, subtra√ß√£o, multiplica√ß√£o e divis√£o. Estas opera√ß√µes s√£o a base para todos os c√°lculos matem√°ticos mais complexos.</p>

            <h4>Propriedades das Opera√ß√µes</h4>
            <ul>
                <li><strong>Comutativa:</strong> A ordem dos n√∫meros n√£o altera o resultado (a + b = b + a)</li>
                <li><strong>Associativa:</strong> A forma como agrupamos os n√∫meros n√£o altera o resultado (a + (b + c) = (a + b) + c)</li>
                <li><strong>Distributiva:</strong> A multiplica√ß√£o distribui-se sobre a adi√ß√£o (a √ó (b + c) = a √ó b + a √ó c)</li>
            </ul>

            <div class="quiz-container" id="matematica-quiz">
                <div class="quiz-question">1. Qual √© o resultado de 45 + 37?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">72</div>
                    <div class="quiz-option" data-correct="true">82</div>
                    <div class="quiz-option" data-correct="false">77</div>
                    <div class="quiz-option" data-correct="false">92</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Se um pacote tem 12 l√°pis e compramos 5 pacotes, quantos l√°pis temos no total?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">50</div>
                    <div class="quiz-option" data-correct="false">55</div>
                    <div class="quiz-option" data-correct="true">60</div>
                    <div class="quiz-option" data-correct="false">72</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual propriedade √© representada por: 5 + 3 = 3 + 5?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Associativa</div>
                    <div class="quiz-option" data-correct="true">Comutativa</div>
                    <div class="quiz-option" data-correct="false">Distributiva</div>
                    <div class="quiz-option" data-correct="false">Identidade</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Qual √© o resultado de 144 √∑ 12?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">10</div>
                    <div class="quiz-option" data-correct="false">11</div>
                    <div class="quiz-option" data-correct="true">12</div>
                    <div class="quiz-option" data-correct="false">13</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">5. Qual destes n√∫meros √© primo?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">15</div>
                    <div class="quiz-option" data-correct="false">21</div>
                    <div class="quiz-option" data-correct="false">27</div>
                    <div class="quiz-option" data-correct="true">17</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Geometria B√°sica",
        content: `
            <h4>Formas Geom√©tricas</h4>
            <p>A geometria estuda as formas, tamanhos, posi√ß√µes relativas e propriedades do espa√ßo. As formas b√°sicas incluem:</p>
            <ul>
                <li><strong>Tri√¢ngulo:</strong> 3 lados</li>
                <li><strong>Quadrado:</strong> 4 lados iguais, 4 √¢ngulos retos</li>
                <li><strong>Ret√¢ngulo:</strong> 4 lados com √¢ngulos retos, lados opostos iguais</li>
                <li><strong>C√≠rculo:</strong> Todos os pontos equidistantes do centro</li>
            </ul>

            <h4>√Åreas e Per√≠metros</h4>
            <p>√Årea √© a medida da superf√≠cie de uma forma. Per√≠metro √© a soma dos comprimentos dos lados.</p>

            <div class="quiz-container" id="geometria-quiz">
                <div class="quiz-question">1. Quantos lados tem um pent√°gono?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">3</div>
                    <div class="quiz-option" data-correct="false">4</div>
                    <div class="quiz-option" data-correct="true">5</div>
                    <div class="quiz-option" data-correct="false">6</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual √© a f√≥rmula para calcular a √°rea de um ret√¢ngulo?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">lado √ó lado</div>
                    <div class="quiz-option" data-correct="true">comprimento √ó largura</div>
                    <div class="quiz-option" data-correct="false">(base √ó altura)/2</div>
                    <div class="quiz-option" data-correct="false">œÄ √ó raio¬≤</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destes √¢ngulos √© agudo?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">180¬∞</div>
                    <div class="quiz-option" data-correct="false">90¬∞</div>
                    <div class="quiz-option" data-correct="true">45¬∞</div>
                    <div class="quiz-option" data-correct="false">270¬∞</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Qual √© o per√≠metro de um quadrado com lado de 5 cm?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">10 cm</div>
                    <div class="quiz-option" data-correct="false">15 cm</div>
                    <div class="quiz-option" data-correct="true">20 cm</div>
                    <div class="quiz-option" data-correct="false">25 cm</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Fra√ß√µes e Decimais",
        content: `
            <h4>Entendendo Fra√ß√µes</h4>
            <p>Uma fra√ß√£o representa partes de um todo. O n√∫mero de cima √© o numerador (partes consideradas) e o de baixo √© o denominador (total de partes).</p>

            <h4>Opera√ß√µes com Fra√ß√µes</h4>
            <ul>
                <li><strong>Adi√ß√£o/Subtra√ß√£o:</strong> Mesmo denominador, somamos os numeradores</li>
                <li><strong>Multiplica√ß√£o:</strong> Numerador √ó numerador, denominador √ó denominador</li>
                <li><strong>Divis√£o:</strong> Invertemos a segunda fra√ß√£o e multiplicamos</li>
            </ul>

            <div class="quiz-container" id="fracoes-quiz">
                <div class="quiz-question">1. Qual fra√ß√£o √© equivalente a 0,5?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">1/4</div>
                    <div class="quiz-option" data-correct="true">1/2</div>
                    <div class="quiz-option" data-correct="false">3/4</div>
                    <div class="quiz-option" data-correct="false">2/1</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual √© o resultado de 3/4 + 1/4?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">1/4</div>
                    <div class="quiz-option" data-correct="false">4/8</div>
                    <div class="quiz-option" data-correct="true">1</div>
                    <div class="quiz-option" data-correct="false">4/4</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual √© a forma decimal de 3/8?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">0,125</div>
                    <div class="quiz-option" data-correct="false">0,25</div>
                    <div class="quiz-option" data-correct="true">0,375</div>
                    <div class="quiz-option" data-correct="false">0,5</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para L√≠ngua Portuguesa - Expanded
const portuguesContent = [
    {
        title: "Gram√°tica",
        content: `
            <h4>Classes Gramaticais</h4>
            <p>As palavras na l√≠ngua portuguesa s√£o classificadas em dez classes gramaticais:</p>
            <ol>
                <li>Substantivo - Nomeia seres, objetos, lugares, etc.</li>
                <li>Artigo - Antecede o substantivo (o, a, os, as, um, uma...)</li>
                <li>Adjetivo - Caracteriza o substantivo</li>
                <li>Pronome - Substitui ou acompanha o substantivo</li>
                <li>Verbo - Expressa a√ß√£o, estado ou fen√¥meno</li>
                <li>Adv√©rbio - Modifica o verbo, adjetivo ou outro adv√©rbio</li>
                <li>Preposi√ß√£o - Estabelece rela√ß√µes entre palavras</li>
                <li>Conjun√ß√£o - Liga palavras ou ora√ß√µes</li>
                <li>Interjei√ß√£o - Expressa emo√ß√µes</li>
                <li>Numeral - Indica quantidade ou posi√ß√£o</li>
            </ol>

            <div class="quiz-container" id="gramatica-quiz">
                <div class="quiz-question">1. Qual das palavras abaixo √© um substantivo?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Correr</div>
                    <div class="quiz-option" data-correct="true">Casa</div>
                    <div class="quiz-option" data-correct="false">Bonito</div>
                    <div class="quiz-option" data-correct="false">Rapidamente</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual destas palavras √© um verbo?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="true">Amar</div>
                    <div class="quiz-option" data-correct="false">Amor</div>
                    <div class="quiz-option" data-correct="false">Am√°vel</div>
                    <div class="quiz-option" data-correct="false">Amorosamente</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destas palavras √© um adv√©rbio?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Felicidade</div>
                    <div class="quiz-option" data-correct="false">Feliz</div>
                    <div class="quiz-option" data-correct="true">Felizmente</div>
                    <div class="quiz-option" data-correct="false">Felicitar</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Qual destas palavras √© uma preposi√ß√£o?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">E</div>
                    <div class="quiz-option" data-correct="true">De</div>
                    <div class="quiz-option" data-correct="false">Mas</div>
                    <div class="quiz-option" data-correct="false">Ou</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Ortografia",
        content: `
            <h4>Regras de Ortografia</h4>
            <p>Algumas regras importantes da ortografia portuguesa:</p>
            <ul>
                <li>Usa-se "m" antes de "p" e "b" (exemplo: campo, tambor)</li>
                <li>Usa-se "s" para som de "z" entre vogais (exemplo: casa, mesa)</li>
                <li>Usa-se "ss" para som de "s" entre vogais (exemplo: passeio, massa)</li>
                <li>Usa-se "√ß" antes de "a", "o", "u" para som de "s" (exemplo: ca√ßa, po√ßo, a√ß√∫car)</li>
            </ul>

            <div class="quiz-container" id="ortografia-quiz">
                <div class="quiz-question">1. Qual destas palavras est√° escrita corretamente?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Caza</div>
                    <div class="quiz-option" data-correct="true">Casa</div>
                    <div class="quiz-option" data-correct="false">Ca√ßa</div>
                    <div class="quiz-option" data-correct="false">Cassa</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual destas palavras est√° escrita incorretamente?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Tambor</div>
                    <div class="quiz-option" data-correct="false">Campo</div>
                    <div class="quiz-option" data-correct="true">Tenpor</div>
                    <div class="quiz-option" data-correct="false">Comboio</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Hist√≥ria de Mo√ßambique - Expanded
const historiaMocambiqueContent = [
    {
        title: "Per√≠odo Pr√©-Colonial",
        content: `
            <h4>Sociedades Pr√©-Coloniais</h4>
            <p>Antes da chegada dos portugueses, o territ√≥rio que hoje √© Mo√ßambique era habitado por diversas sociedades organizadas em reinos e imp√©rios:</p>
            <ul>
                <li><strong>Reino de Mutapa:</strong> Localizado no norte e centro, era rico em ouro e controlava rotas comerciais</li>
                <li><strong>Reino de Gaza:</strong> Dominava o sul do territ√≥rio no s√©culo XIX</li>
                <li><strong>Povos Bantus:</strong> Respons√°veis pela introdu√ß√£o da metalurgia e agricultura</li>
                <li><strong>Povos Swahili:</strong> Desenvolveram cidades-estado ao longo da costa</li>
            </ul>

            <h4>Economia e Com√©rcio</h4>
            <p>As sociedades pr√©-coloniais praticavam:</p>
            <ul>
                <li>Agricultura de subsist√™ncia (milho, mapira, feij√£o)</li>
                <li>Pecu√°ria (gado bovino, caprino)</li>
                <li>Com√©rcio com √°rabes e persas (ouro, marfim, escravos)</li>
                <li>Minera√ß√£o (ouro, cobre, ferro)</li>
            </ul>

            <div class="quiz-container" id="historia-mocambique-quiz">
                <div class="quiz-question">1. Qual era o principal reino na regi√£o norte de Mo√ßambique antes da coloniza√ß√£o?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="true">Reino de Mutapa</div>
                    <div class="quiz-option" data-correct="false">Reino do Congo</div>
                    <div class="quiz-option" data-correct="false">Imp√©rio Mali</div>
                    <div class="quiz-option" data-correct="false">Reino de Gaza</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual destes produtos N√ÉO era comercializado no per√≠odo pr√©-colonial?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Ouro</div>
                    <div class="quiz-option" data-correct="false">Marfim</div>
                    <div class="quiz-option" data-correct="true">Petr√≥leo</div>
                    <div class="quiz-option" data-correct="false">Escravos</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Que povo desenvolveu cidades-estado ao longo da costa mo√ßambicana?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Bantus</div>
                    <div class="quiz-option" data-correct="true">Swahili</div>
                    <div class="quiz-option" data-correct="false">Khoisan</div>
                    <div class="quiz-option" data-correct="false">Portugueses</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Qual destas atividades N√ÉO era praticada no per√≠odo pr√©-colonial?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Agricultura</div>
                    <div class="quiz-option" data-correct="false">Pecu√°ria</div>
                    <div class="quiz-option" data-correct="false">Minera√ß√£o</div>
                    <div class="quiz-option" data-correct="true">Ind√∫stria automobil√≠stica</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Per√≠odo Colonial",
        content: `
            <h4>A Chegada dos Portugueses</h4>
            <p>Vasco da Gama chegou a Mo√ßambique em 1498, iniciando o processo de coloniza√ß√£o que duraria quase 500 anos.</p>

            <h4>Sistema Colonial</h4>
            <ul>
                <li><strong>Prazos:</strong> Sistema de concess√£o de terras a colonos</li>
                <li><strong>Chibalo:</strong> Trabalho for√ßado imposto aos africanos</li>
                <li><strong>Economia colonial:</strong> Baseada na exporta√ß√£o de mat√©rias-primas</li>
                <li><strong>Administra√ß√£o:</strong> Dividida em col√¥nias, distritos e postos administrativos</li>
            </ul>

            <div class="quiz-container" id="colonial-quiz">
                <div class="quiz-question">1. Em que ano Vasco da Gama chegou a Mo√ßambique?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">1488</div>
                    <div class="quiz-option" data-correct="true">1498</div>
                    <div class="quiz-option" data-correct="false">1508</div>
                    <div class="quiz-option" data-correct="false">1518</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Como se chamava o sistema de trabalho for√ßado imposto pelos portugueses?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Prazos</div>
                    <div class="quiz-option" data-correct="true">Chibalo</div>
                    <div class="quiz-option" data-correct="false">Apartheid</div>
                    <div class="quiz-option" data-correct="false">Escravid√£o</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Geografia - Expanded
const geografiaContent = [
    {
        title: "Geografia de Mo√ßambique",
        content: `
            <h4>Caracter√≠sticas F√≠sicas</h4>
            <p>Mo√ßambique est√° localizado na costa sudeste da √Åfrica, com as seguintes caracter√≠sticas:</p>
            <ul>
                <li><strong>√Årea:</strong> 801.590 km¬≤</li>
                <li><strong>Clima:</strong> Tropical a subtropical</li>
                <li><strong>Relevo:</strong> Plan√≠cies costeiras (leste), planaltos (oeste)</li>
                <li><strong>Rios principais:</strong> Zambeze, Limpopo, Save, Rovuma</li>
                <li><strong>Vegeta√ß√£o:</strong> Savanas, florestas, mangais</li>
            </ul>

            <h4>Divis√£o Administrativa</h4>
            <p>Mo√ßambique est√° dividido em:</p>
            <ol>
                <li>11 prov√≠ncias</li>
                <li>154 distritos</li>
                <li>Postos administrativos</li>
                <li>Localidades</li>
            </ol>

            <div class="quiz-container" id="geografia-quiz">
                <div class="quiz-question">1. Mo√ßambique faz fronteira com quantos pa√≠ses?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">4</div>
                    <div class="quiz-option" data-correct="false">5</div>
                    <div class="quiz-option" data-correct="true">6</div>
                    <div class="quiz-option" data-correct="false">7</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual √© o rio mais importante de Mo√ßambique?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Limpopo</div>
                    <div class="quiz-option" data-correct="false">Save</div>
                    <div class="quiz-option" data-correct="true">Zambeze</div>
                    <div class="quiz-option" data-correct="false">Rovuma</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destes N√ÉO √© um pa√≠s vizinho de Mo√ßambique?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Tanz√¢nia</div>
                    <div class="quiz-option" data-correct="false">Zimbabwe</div>
                    <div class="quiz-option" data-correct="true">Qu√™nia</div>
                    <div class="quiz-option" data-correct="false">√Åfrica do Sul</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Quantas prov√≠ncias tem Mo√ßambique?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">9</div>
                    <div class="quiz-option" data-correct="false">10</div>
                    <div class="quiz-option" data-correct="true">11</div>
                    <div class="quiz-option" data-correct="false">12</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Clima e Vegeta√ß√£o",
        content: `
            <h4>Tipos de Clima</h4>
            <p>Mo√ßambique apresenta tr√™s tipos principais de clima:</p>
            <ul>
                <li><strong>Tropical h√∫mido:</strong> Norte e costa central (altas temperaturas e precipita√ß√£o)</li>
                <li><strong>Tropical seco:</strong> Interior e sul (menos precipita√ß√£o)</li>
                <li><strong>Subtropical:</strong> Regi√µes altas (temperaturas mais amenas)</li>
            </ul>

            <h4>Tipos de Vegeta√ß√£o</h4>
            <ul>
                <li><strong>Florestas:</strong> Norte e zonas montanhosas</li>
                <li><strong>Savanas:</strong> Maior parte do territ√≥rio</li>
                <li><strong>Mangais:</strong> Ao longo da costa</li>
                <li><strong>Estepe:</strong> Sul e zonas mais secas</li>
            </ul>

            <div class="quiz-container" id="clima-quiz">
                <div class="quiz-question">1. Qual destas regi√µes tem clima tropical h√∫mido?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="true">Norte e costa central</div>
                    <div class="quiz-option" data-correct="false">Interior e sul</div>
                    <div class="quiz-option" data-correct="false">Regi√µes altas</div>
                    <div class="quiz-option" data-correct="false">Extremo sul</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Biologia - Expanded
const biologiaContent = [
    {
        title: "Seres Vivos",
        content: `
            <h4>Caracter√≠sticas dos Seres Vivos</h4>
            <p>Todos os seres vivos compartilham certas caracter√≠sticas:</p>
            <ol>
                <li><strong>Organiza√ß√£o celular:</strong> S√£o formados por c√©lulas</li>
                <li><strong>Reprodu√ß√£o:</strong> Capacidade de gerar descendentes</li>
                <li><strong>Crescimento e desenvolvimento:</strong> Aumento de tamanho e complexidade</li>
                <li><strong>Metabolismo:</strong> Transforma√ß√£o de energia</li>
                <li><strong>Homeostase:</strong> Manuten√ß√£o do equil√≠brio interno</li>
                <li><strong>Resposta a est√≠mulos:</strong> Rea√ß√£o a mudan√ßas no ambiente</li>
                <li><strong>Adapta√ß√£o:</strong> Mudan√ßas para sobreviver no ambiente</li>
            </ol>

            <h4>Classifica√ß√£o dos Seres Vivos</h4>
            <p>Os seres vivos s√£o classificados em cinco reinos:</p>
            <ul>
                <li><strong>Monera:</strong> Bact√©rias e cianobact√©rias</li>
                <li><strong>Protista:</strong> Protozo√°rios e algas</li>
                <li><strong>Fungi:</strong> Fungos</li>
                <li><strong>Plantae:</strong> Plantas</li>
                <li><strong>Animalia:</strong> Animais</li>
            </ul>

            <div class="quiz-container" id="biologia-quiz">
                <div class="quiz-question">1. Qual destes n√£o √© um ser vivo?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Bact√©ria</div>
                    <div class="quiz-option" data-correct="false">Planta</div>
                    <div class="quiz-option" data-correct="true">Rocha</div>
                    <div class="quiz-option" data-correct="false">Fungo</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual destas √© uma caracter√≠stica dos seres vivos?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Ser feito de metal</div>
                    <div class="quiz-option" data-correct="true">Reprodu√ß√£o</div>
                    <div class="quiz-option" data-correct="false">N√£o mudar com o tempo</div>
                    <div class="quiz-option" data-correct="false">N√£o precisar de energia</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. A que reino pertencem as bact√©rias?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="true">Monera</div>
                    <div class="quiz-option" data-correct="false">Protista</div>
                    <div class="quiz-option" data-correct="false">Fungi</div>
                    <div class="quiz-option" data-correct="false">Plantae</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Qual destes processos permite aos seres vivos manter o equil√≠brio interno?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Reprodu√ß√£o</div>
                    <div class="quiz-option" data-correct="false">Crescimento</div>
                    <div class="quiz-option" data-correct="true">Homeostase</div>
                    <div class="quiz-option" data-correct="false">Fotoss√≠ntese</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "C√©lula e Organelas",
        content: `
            <h4>A C√©lula</h4>
            <p>A c√©lula √© a unidade b√°sica da vida. Existem dois tipos principais:</p>
            <ul>
                <li><strong>Procari√≥ticas:</strong> Sem n√∫cleo definido (bact√©rias)</li>
                <li><strong>Eucari√≥ticas:</strong> Com n√∫cleo definido (animais, plantas, fungos)</li>
            </ul>

            <h4>Organelas Celulares</h4>
            <p>Principais organelas das c√©lulas eucari√≥ticas:</p>
            <ul>
                <li><strong>N√∫cleo:</strong> Cont√©m o material gen√©tico</li>
                <li><strong>Mitoc√¥ndrias:</strong> Produ√ß√£o de energia</li>
                <li><strong>Ret√≠culo endoplasm√°tico:</strong> S√≠ntese de prote√≠nas e lip√≠dios</li>
                <li><strong>Complexo de Golgi:</strong> Processamento e secre√ß√£o de subst√¢ncias</li>
                <li><strong>Lisossomos:</strong> Digest√£o intracelular</li>
                <li><strong>Cloroplastos:</strong> Fotoss√≠ntese (apenas em plantas)</li>
            </ul>

            <div class="quiz-container" id="celula-quiz">
                <div class="quiz-question">1. Qual destas organelas √© encontrada apenas em c√©lulas vegetais?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Mitoc√¥ndria</div>
                    <div class="quiz-option" data-correct="false">N√∫cleo</div>
                    <div class="quiz-option" data-correct="true">Cloroplasto</div>
                    <div class="quiz-option" data-correct="false">Lisossomo</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para F√≠sica - Expanded
const fisicaContent = [
    {
        title: "For√ßas e Movimento",
        content: `
            <h4>Leis de Newton</h4>
            <p>As tr√™s leis de Newton que explicam o movimento dos objetos:</p>
            <ol>
                <li><strong>Primeira Lei (In√©rcia):</strong> Um objeto permanece em repouso ou em movimento retil√≠neo uniforme a menos que uma for√ßa atue sobre ele.</li>
                <li><strong>Segunda Lei (F=ma):</strong> A for√ßa resultante sobre um objeto √© igual √† sua massa vezes sua acelera√ß√£o.</li>
                <li><strong>Terceira Lei (A√ß√£o e Rea√ß√£o):</strong> Para toda a√ß√£o h√° uma rea√ß√£o igual e oposta.</li>
            </ol>

            <h4>Tipos de For√ßas</h4>
            <ul>
                <li><strong>Gravitacional:</strong> Atra√ß√£o entre massas</li>
                <li><strong>El√©trica:</strong> Entre cargas el√©tricas</li>
                <li><strong>Magn√©tica:</strong> Entre √≠m√£s ou cargas em movimento</li>
                <li><strong>Normal:</strong> Rea√ß√£o de superf√≠cies em contato</li>
                <li><strong>Atrito:</strong> Oposi√ß√£o ao movimento</li>
            </ul>

            <div class="quiz-container" id="fisica-quiz">
                <div class="quiz-question">1. Qual destes √© um exemplo de for√ßa?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Temperatura</div>
                    <div class="quiz-option" data-correct="true">Gravidade</div>
                    <div class="quiz-option" data-correct="false">Volume</div>
                    <div class="quiz-option" data-correct="false">Densidade</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual lei de Newton explica por que nos machucamos quando batemos em algo?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Primeira Lei</div>
                    <div class="quiz-option" data-correct="false">Segunda Lei</div>
                    <div class="quiz-option" data-correct="true">Terceira Lei</div>
                    <div class="quiz-option" data-correct="false">Lei da Gravita√ß√£o</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destas for√ßas √© respons√°vel por manter os planetas em √≥rbita?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="true">Gravitacional</div>
                    <div class="quiz-option" data-correct="false">El√©trica</div>
                    <div class="quiz-option" data-correct="false">Magn√©tica</div>
                    <div class="quiz-option" data-correct="false">Atrito</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Energia",
        content: `
            <h4>Formas de Energia</h4>
            <p>A energia pode se manifestar de diversas formas:</p>
            <ul>
                <li><strong>Cin√©tica:</strong> Energia do movimento</li>
                <li><strong>Potencial:</strong> Energia armazenada</li>
                <li><strong>T√©rmica:</strong> Energia do calor</li>
                <li><strong>Luminosa:</strong> Energia da luz</li>
                <li><strong>El√©trica:</strong> Energia das cargas el√©tricas</li>
                <li><strong>Qu√≠mica:</strong> Energia armazenada em liga√ß√µes qu√≠micas</li>
                <li><strong>Nuclear:</strong> Energia do n√∫cleo at√¥mico</li>
            </ul>

            <h4>Transforma√ß√µes de Energia</h4>
            <p>A energia n√£o pode ser criada nem destru√≠da, apenas transformada (Lei da Conserva√ß√£o da Energia). Exemplos:</p>
            <ul>
                <li>L√¢mpada: El√©trica ‚Üí Luminosa + T√©rmica</li>
                <li>Motor: Qu√≠mica (combust√≠vel) ‚Üí Cin√©tica</li>
                <li>Fotoss√≠ntese: Luminosa ‚Üí Qu√≠mica</li>
            </ul>

            <div class="quiz-container" id="energia-quiz">
                <div class="quiz-question">1. Qual destas √© uma forma de energia?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">√Ågua</div>
                    <div class="quiz-option" data-correct="true">T√©rmica</div>
                    <div class="quiz-option" data-correct="false">Ar</div>
                    <div class="quiz-option" data-correct="false">Terra</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Qu√≠mica - Expanded
const quimicaContent = [
    {
        title: "Mat√©ria e Suas Propriedades",
        content: `
            <h4>Estados da Mat√©ria</h4>
            <p>A mat√©ria pode existir em tr√™s estados principais:</p>
            <ul>
                <li><strong>S√≥lido:</strong> Forma e volume definidos</li>
                <li><strong>L√≠quido:</strong> Volume definido, forma vari√°vel</li>
                <li><strong>Gasoso:</strong> Forma e volume vari√°veis</li>
            </ul>

            <h4>Mudan√ßas de Estado</h4>
            <ul>
                <li><strong>Fus√£o:</strong> S√≥lido ‚Üí L√≠quido</li>
                <li><strong>Solidifica√ß√£o:</strong> L√≠quido ‚Üí S√≥lido</li>
                <li><strong>Vaporiza√ß√£o:</strong> L√≠quido ‚Üí Gasoso</li>
                <li><strong>Condensa√ß√£o:</strong> Gasoso ‚Üí L√≠quido</li>
                <li><strong>Sublima√ß√£o:</strong> S√≥lido ‚Üí Gasoso</li>
                <li><strong>Deposi√ß√£o:</strong> Gasoso ‚Üí S√≥lido</li>
            </ul>

            <div class="quiz-container" id="quimica-quiz">
                <div class="quiz-question">1. Qual destes √© um exemplo de mudan√ßa f√≠sica?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Queimar papel</div>
                    <div class="quiz-option" data-correct="true">Derreter gelo</div>
                    <div class="quiz-option" data-correct="false">Ferrugem</div>
                    <div class="quiz-option" data-correct="false">Cozinhar um ovo</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual √© o nome da mudan√ßa de estado de l√≠quido para gasoso?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Fus√£o</div>
                    <div class="quiz-option" data-correct="true">Vaporiza√ß√£o</div>
                    <div class="quiz-option" data-correct="false">Condensa√ß√£o</div>
                    <div class="quiz-option" data-correct="false">Sublima√ß√£o</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destas √© uma propriedade f√≠sica da mat√©ria?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Inflamabilidade</div>
                    <div class="quiz-option" data-correct="true">Ponto de fus√£o</div>
                    <div class="quiz-option" data-correct="false">Reatividade</div>
                    <div class="quiz-option" data-correct="false">Toxicidade</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Elementos e Tabela Peri√≥dica",
        content: `
            <h4>Elementos Qu√≠micos</h4>
            <p>Um elemento qu√≠mico √© uma subst√¢ncia pura composta por √°tomos com o mesmo n√∫mero at√¥mico (n√∫mero de pr√≥tons).</p>

            <h4>Tabela Peri√≥dica</h4>
            <p>A tabela peri√≥dica organiza os elementos por:</p>
            <ul>
                <li><strong>N√∫mero at√¥mico:</strong> N√∫mero de pr√≥tons</li>
                <li><strong>Fam√≠lias (grupos):</strong> Colunas verticais com propriedades similares</li>
                <li><strong>Per√≠odos:</strong> Linhas horizontais</li>
            </ul>

            <div class="quiz-container" id="elementos-quiz">
                <div class="quiz-question">1. Qual √© o s√≠mbolo qu√≠mico do oxig√™nio?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Ox</div>
                    <div class="quiz-option" data-correct="true">O</div>
                    <div class="quiz-option" data-correct="false">Oi</div>
                    <div class="quiz-option" data-correct="false">Og</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Educa√ß√£o C√≠vica - Expanded
const civicaContent = [
    {
        title: "Direitos e Deveres",
        content: `
            <h4>Direitos Fundamentais</h4>
            <p>Segundo a Constitui√ß√£o de Mo√ßambique, todos os cidad√£os t√™m direito a:</p>
            <ul>
                <li>Vida e integridade f√≠sica e moral</li>
                <li>Liberdade de express√£o e informa√ß√£o</li>
                <li>Liberdade de reuni√£o e associa√ß√£o</li>
                <li>Participa√ß√£o na vida pol√≠tica</li>
                <li>Educa√ß√£o, sa√∫de e habita√ß√£o</li>
                <li>Trabalho e justa remunera√ß√£o</li>
            </ul>

            <h4>Deveres dos Cidad√£os</h4>
            <ul>
                <li>Respeitar a Constitui√ß√£o e as leis</li>
                <li>Defender a p√°tria</li>
                <li>Contribuir para o desenvolvimento do pa√≠s</li>
                <li>Proteger o ambiente e os recursos naturais</li>
                <li>Respeitar os direitos dos outros</li>
                <li>Pagar impostos</li>
            </ul>

            <div class="quiz-container" id="civica-quiz">
                <div class="quiz-question">1. Qual destes √© um direito garantido pela Constitui√ß√£o de Mo√ßambique?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">N√£o pagar impostos</div>
                    <div class="quiz-option" data-correct="true">Liberdade de express√£o</div>
                    <div class="quiz-option" data-correct="false">Ignorar as leis</div>
                    <div class="quiz-option" data-correct="false">N√£o participar nas elei√ß√µes</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Qual destes √© um dever do cidad√£o mo√ßambicano?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Receber benef√≠cios do governo</div>
                    <div class="quiz-option" data-correct="false">Ter emprego garantido</div>
                    <div class="quiz-option" data-correct="true">Pagar impostos</div>
                    <div class="quiz-option" data-correct="false">Exigir direitos sem cumprir deveres</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual destes N√ÉO √© um direito fundamental?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Educa√ß√£o</div>
                    <div class="quiz-option" data-correct="false">Sa√∫de</div>
                    <div class="quiz-option" data-correct="true">Carro pr√≥prio</div>
                    <div class="quiz-option" data-correct="false">Liberdade de express√£o</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Organiza√ß√£o do Estado",
        content: `
            <h4>Poderes do Estado</h4>
            <p>Mo√ßambique √© uma rep√∫blica com separa√ß√£o de poderes:</p>
            <ul>
                <li><strong>Poder Legislativo:</strong> Assembleia da Rep√∫blica (faz as leis)</li>
                <li><strong>Poder Executivo:</strong> Presidente e Governo (executa as leis)</li>
                <li><strong>Poder Judicial:</strong> Tribunais (interpreta e aplica as leis)</li>
            </ul>

            <h4>S√≠mbolos Nacionais</h4>
            <ul>
                <li><strong>Bandeira:</strong> Verde, preto, amarelo e vermelho com estrela branca</li>
                <li><strong>Hino Nacional:</strong> "P√°tria Amada"</li>
                <li><strong>Lema:</strong> "Unidade, Trabalho, Vigil√¢ncia"</li>
            </ul>

            <div class="quiz-container" id="estado-quiz">
                <div class="quiz-question">1. Qual destes √© um dos poderes do Estado mo√ßambicano?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Poder Militar</div>
                    <div class="quiz-option" data-correct="true">Poder Legislativo</div>
                    <div class="quiz-option" data-correct="false">Poder Econ√¥mico</div>
                    <div class="quiz-option" data-correct="false">Poder Social</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Conte√∫do e quizzes para Ingl√™s - Expanded
const inglesContent = [
    {
        title: "Vocabul√°rio B√°sico",
        content: `
            <h4>Palavras Essenciais</h4>
            <p>Algumas palavras e express√µes b√°sicas em ingl√™s:</p>
            <table class="vocabulary-table">
                <tr>
                    <th>Portugu√™s</th>
                    <th>Ingl√™s</th>
                </tr>
                <tr>
                    <td>Casa</td>
                    <td>House</td>
                </tr>
                <tr>
                    <td>Escola</td>
                    <td>School</td>
                </tr>
                <tr>
                    <td>√Ågua</td>
                    <td>Water</td>
                </tr>
                <tr>
                    <td>Comida</td>
                    <td>Food</td>
                </tr>
                <tr>
                    <td>Livro</td>
                    <td>Book</td>
                </tr>
                <tr>
                    <td>Bom dia</td>
                    <td>Good morning</td>
                </tr>
                <tr>
                    <td>Obrigado</td>
                    <td>Thank you</td>
                </tr>
                <tr>
                    <td>Por favor</td>
                    <td>Please</td>
                </tr>
            </table>

            <h4>Frases √öteis</h4>
            <ul>
                <li><strong>What's your name?</strong> - Qual √© o seu nome?</li>
                <li><strong>My name is...</strong> - Meu nome √©...</li>
                <li><strong>How are you?</strong> - Como voc√™ est√°?</li>
                <li><strong>I'm fine, thank you.</strong> - Estou bem, obrigado.</li>
                <li><strong>Where are you from?</strong> - De onde voc√™ √©?</li>
                <li><strong>I'm from Mozambique.</strong> - Eu sou de Mo√ßambique.</li>
            </ul>

            <div class="quiz-container" id="ingles-quiz">
                <div class="quiz-question">1. Como se diz "casa" em ingl√™s?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">Car</div>
                    <div class="quiz-option" data-correct="true">House</div>
                    <div class="quiz-option" data-correct="false">Book</div>
                    <div class="quiz-option" data-correct="false">Tree</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-question" style="display:none">2. Como se diz "obrigado" em ingl√™s?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Please</div>
                    <div class="quiz-option" data-correct="true">Thank you</div>
                    <div class="quiz-option" data-correct="false">Hello</div>
                    <div class="quiz-option" data-correct="false">Goodbye</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">3. Qual √© a tradu√ß√£o de "What's your name?"?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">Como voc√™ est√°?</div>
                    <div class="quiz-option" data-correct="true">Qual √© o seu nome?</div>
                    <div class="quiz-option" data-correct="false">De onde voc√™ √©?</div>
                    <div class="quiz-option" data-correct="false">Que horas s√£o?</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-question" style="display:none">4. Como se diz "eu sou de Mo√ßambique" em ingl√™s?</div>
                <div class="quiz-options" style="display:none">
                    <div class="quiz-option" data-correct="false">I am Mozambique</div>
                    <div class="quiz-option" data-correct="true">I'm from Mozambique</div>
                    <div class="quiz-option" data-correct="false">I go to Mozambique</div>
                    <div class="quiz-option" data-correct="false">I like Mozambique</div>
                </div>
                <div class="quiz-feedback" style="display:none"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    },
    {
        title: "Gram√°tica B√°sica",
        content: `
            <h4>Verbo "To Be"</h4>
            <p>O verbo "to be" (ser/estar) √© um dos mais importantes em ingl√™s:</p>
            <table class="grammar-table">
                <tr>
                    <th>Pronome</th>
                    <th>Forma do verbo</th>
                </tr>
                <tr>
                    <td>I</td>
                    <td>am</td>
                </tr>
                <tr>
                    <td>You</td>
                    <td>are</td>
                </tr>
                <tr>
                    <td>He/She/It</td>
                    <td>is</td>
                </tr>
                <tr>
                    <td>We</td>
                    <td>are</td>
                </tr>
                <tr>
                    <td>You</td>
                    <td>are</td>
                </tr>
                <tr>
                    <td>They</td>
                    <td>are</td>
                </tr>
            </table>

            <h4>Exemplos</h4>
            <ul>
                <li>I am a student. (Eu sou um estudante.)</li>
                <li>You are my friend. (Voc√™ √© meu amigo.)</li>
                <li>She is from Maputo. (Ela √© de Maputo.)</li>
            </ul>

            <div class="quiz-container" id="gramatica-ingles-quiz">
                <div class="quiz-question">1. Qual √© a forma correta do verbo "to be" para "he"?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="false">am</div>
                    <div class="quiz-option" data-correct="false">are</div>
                    <div class="quiz-option" data-correct="true">is</div>
                    <div class="quiz-option" data-correct="false">be</div>
                </div>
                <div class="quiz-feedback"></div>

                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `
    }
];

// Initialize array for dynamic quizzes if it doesn't exist
let dynamicQuizzes = [];

// Initialize progress bars from local storage
function initProgressBars() {
    const progress = JSON.parse(localStorage.getItem('learningProgress')) || {};

    // Set progress for each subject
    const subjects = [
        'historia', 'matematica', 'portugues', 'historia-mocambique',
        'geografia', 'biologia', 'fisica', 'quimica', 'educacao-civica', 'ingles'
    ];

    subjects.forEach(subject => {
        const progressBar = document.getElementById(`${subject}-progress`);
        if (progressBar) {
            const percentage = progress[subject] || 0;
            progressBar.style.width = `${percentage}%`;
            progressBar.textContent = `${percentage}%`;
        }
    });
}

// Function to render dynamic quizzes
function renderDynamicQuizzes() {
    const container = document.getElementById('dynamic-quiz-container');
    if (!container) return;

    let html = '';

    dynamicQuizzes.forEach((quiz, quizIndex) => {
        html += `
            <div class="quiz-container" id="${quiz.id}-quiz" data-quiz-index="${quizIndex}">
                <h4 style="color: var(--primary); margin-bottom: 20px;">${quiz.title}</h4>
        `;

        quiz.questions.forEach((q, qIndex) => {
            const displayStyle = qIndex === 0 ? 'block' : 'none';
            html += `
                <div class="quiz-question" style="display:${displayStyle}">${qIndex + 1}. ${q.question}</div>
                <div class="quiz-options" style="display:${displayStyle}">
            `;

            q.options.forEach((option, optIndex) => {
                const isCorrect = optIndex === q.correctIndex;
                html += `<div class="quiz-option" data-correct="${isCorrect}">${option}</div>`;
            });

            html += `
                </div>
                <div class="quiz-feedback" style="display:${displayStyle}"></div>
            `;
        });

        html += `
                <div class="quiz-actions">
                    <button class="quiz-next">Pr√≥xima</button>
                    <button class="quiz-finish" style="display:none">Finalizar</button>
                </div>
                <div class="quiz-results" style="display:none"></div>
            </div>
        `;
    });

    container.innerHTML = html;
    initQuizzes();
}

// Function to add new quiz
function showAddQuizModal() {
    const modal = document.createElement('div');
    modal.className = 'learning-modal';
    modal.style.display = 'block';
    modal.innerHTML = `
        <div class="learning-container" style="max-width: 600px;">
            <div class="learning-header" style="background-color: var(--primary);">
                <h2 class="learning-title">Adicionar Novo Quiz</h2>
                <div class="close-learning" id="close-add-quiz">&times;</div>
            </div>
            <div class="learning-body">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">T√≠tulo do Quiz:</label>
                    <input type="text" id="quiz-title-input" style="width: 100%; padding: 12px; border: 1px solid var(--gray); border-radius: 8px; font-size: 1rem;" placeholder="Digite o t√≠tulo do quiz">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Categoria:</label>
                    <select id="quiz-category-input" style="width: 100%; padding: 12px; border: 1px solid var(--gray); border-radius: 8px; font-size: 1rem;">
                        <option value="portuguese">Portugu√™s</option>
                        <option value="english">Ingl√™s</option>
                        <option value="math">Matem√°tica</option>
                        <option value="physical-education">Educa√ß√£o F√≠sica</option>
                        <option value="tic">TIC</option>
                        <option value="philosophy">Introdu√ß√£o √† Filosofia</option>
                        <option value="history">Hist√≥ria</option>
                        <option value="geography">Geografia</option>
                        <option value="french">Franc√™s</option>
                        <option value="biology">Biologia</option>
                        <option value="chemistry">Qu√≠mica</option>
                        <option value="physics">F√≠sica</option>
                        <option value="visual-education">Educa√ß√£o Visual</option>
                        <option value="descriptive-geometry">Geometria Descritiva</option>
                    </select>
                </div>

                <div id="questions-container">
                    <h4 style="margin-bottom: 15px;">Perguntas:</h4>
                    <div class="question-item" data-question-index="0">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Pergunta 1:</label>
                        <input type="text" class="question-text" style="width: 100%; padding: 10px; border: 1px solid var(--gray); border-radius: 8px; margin-bottom: 10px;" placeholder="Digite a pergunta">

                        <label style="display: block; margin-bottom: 8px;">Op√ß√µes (marque a correta):</label>
                        <div style="margin-bottom: 10px;">
                            <input type="radio" name="correct-0" value="0" checked>
                            <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 1">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <input type="radio" name="correct-0" value="1">
                            <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 2">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <input type="radio" name="correct-0" value="2">
                            <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 3">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <input type="radio" name="correct-0" value="3">
                            <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 4">
                        </div>
                    </div>
                </div>

                <button id="add-question-btn" style="padding: 10px 20px; background-color: var(--info); color: white; border: none; border-radius: 8px; cursor: pointer; margin-bottom: 20px;">
                    <i class="fas fa-plus"></i> Adicionar Pergunta
                </button>

                <div style="text-align: center; margin-top: 20px;">
                    <button id="save-quiz-btn" style="padding: 14px 28px; background-color: var(--success); color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer;">
                        <i class="fas fa-save"></i> Salvar Quiz
                    </button>
                </div>
            </div>
        </div>
    `;

    document.body.appendChild(modal);

    let questionCount = 1;

    // Close modal
    document.getElementById('close-add-quiz').addEventListener('click', () => {
        modal.remove();
    });

    // Add question
    document.getElementById('add-question-btn').addEventListener('click', () => {
        const questionsContainer = document.getElementById('questions-container');
        const newQuestion = document.createElement('div');
        newQuestion.className = 'question-item';
        newQuestion.setAttribute('data-question-index', questionCount);
        newQuestion.innerHTML = `
            <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--gray);">
            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Pergunta ${questionCount + 1}:</label>
            <input type="text" class="question-text" style="width: 100%; padding: 10px; border: 1px solid var(--gray); border-radius: 8px; margin-bottom: 10px;" placeholder="Digite a pergunta">

            <label style="display: block; margin-bottom: 8px;">Op√ß√µes (marque a correta):</label>
            <div style="margin-bottom: 10px;">
                <input type="radio" name="correct-${questionCount}" value="0" checked>
                <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 1">
            </div>
            <div style="margin-bottom: 10px;">
                <input type="radio" name="correct-${questionCount}" value="1">
                <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 2">
            </div>
            <div style="margin-bottom: 10px;">
                <input type="radio" name="correct-${questionCount}" value="2">
                <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 3">
            </div>
            <div style="margin-bottom: 20px;">
                <input type="radio" name="correct-${questionCount}" value="3">
                <input type="text" class="option-text" style="width: 85%; padding: 8px; border: 1px solid var(--gray); border-radius: 8px; margin-left: 8px;" placeholder="Op√ß√£o 4">
            </div>
        `;
        questionsContainer.appendChild(newQuestion);
        questionCount++;
    });

    // Save quiz
    document.getElementById('save-quiz-btn').addEventListener('click', () => {
        const title = document.getElementById('quiz-title-input').value.trim();
        const category = document.getElementById('quiz-category-input').value;

        if (!title) {
            alert('Por favor, digite o t√≠tulo do quiz.');
            return;
        }

        const questionItems = document.querySelectorAll('.question-item');
        const questions = [];

        questionItems.forEach((item, index) => {
            const questionText = item.querySelector('.question-text').value.trim();
            const optionTexts = Array.from(item.querySelectorAll('.option-text')).map(input => input.value.trim());
            const correctIndex = parseInt(item.querySelector(`input[name="correct-${index}"]:checked`).value);

            if (!questionText || optionTexts.some(opt => !opt)) {
                return;
            }

            questions.push({
                question: questionText,
                options: optionTexts,
                correctIndex: correctIndex
            });
        });

        if (questions.length === 0) {
            alert('Por favor, adicione pelo menos uma pergunta completa.');
            return;
        }

        const newQuiz = {
            id: 'quiz-' + Date.now(),
            title: title,
            category: category,
            questions: questions
        };

        dynamicQuizzes.push(newQuiz);
        localStorage.setItem('customQuizzes', JSON.stringify(dynamicQuizzes));

        renderDynamicQuizzes();
        modal.remove();

        alert('Quiz adicionado com sucesso!');
    });

    // Close on outside click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    });
}

// Load custom quizzes from localStorage
function loadCustomQuizzes() {
    const saved = localStorage.getItem('customQuizzes');
    if (saved) {
        try {
            const parsed = JSON.parse(saved);
            if (Array.isArray(parsed)) {
                dynamicQuizzes = parsed;
            }
        } catch (e) {
            console.error('Erro ao carregar quizzes:', e);
        }
    }
}

// Fun√ß√£o para gerar e baixar certificado como imagem
window.downloadCertificate = function downloadCertificate(quizName, score, total, percentage) {
    // Criar canvas para o certificado
    const canvas = document.createElement('canvas');
    canvas.width = 1200;
    canvas.height = 800;
    const ctx = canvas.getContext('2d');

    // Fundo gradiente
    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    gradient.addColorStop(0, '#000000');
    gradient.addColorStop(1, '#1a1a1a');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Borda dourada
    ctx.strokeStyle = '#FFD700';
    ctx.lineWidth = 20;
    ctx.strokeRect(40, 40, canvas.width - 80, canvas.height - 80);

    // T√≠tulo "CERTIFICADO"
    ctx.fillStyle = '#FFD700';
    ctx.font = 'bold 72px Inter, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('CERTIFICADO', canvas.width / 2, 150);

    // Subt√≠tulo
    ctx.fillStyle = '#FFFFFF';
    ctx.font = '32px Inter, sans-serif';
    ctx.fillText('', canvas.width / 2, 210);

    // Nome do aluno (usar nome do localStorage ou "Estudante")
    const userName = localStorage.getItem('userName') || 'Estudante';
    const userTurma = localStorage.getItem('userTurma') || '';
    ctx.fillStyle = '#FFD700';
    ctx.font = 'bold 42px Inter, sans-serif';
    ctx.fillText(userName, canvas.width / 2, 320);
    
    // Turma (se dispon√≠vel)
    if (userTurma) {
        ctx.fillStyle = '#FFFFFF';
        ctx.font = '26px Inter, sans-serif';
        ctx.fillText(`Turma: ${userTurma}`, canvas.width / 2, 360);
    }

    // Texto descritivo
    ctx.fillStyle = '#CCCCCC';
    ctx.font = '28px Inter, sans-serif';
    ctx.fillText('Concluiu com sucesso o quiz:', canvas.width / 2, userTurma ? 420 : 390);

    // Nome do quiz
    ctx.fillStyle = '#FFFFFF';
    ctx.font = 'bold 36px Inter, sans-serif';
    const displayQuizName = quizName.replace('-quiz', '').replace(/-/g, ' ').toUpperCase();
    const yOffset = userTurma ? 30 : 0;
    ctx.fillText(displayQuizName, canvas.width / 2, 450 + yOffset);

    // Pontua√ß√£o
    ctx.fillStyle = '#FFD700';
    ctx.font = 'bold 48px Inter, sans-serif';
    ctx.fillText(`${score} de ${total} (${percentage}%)`, canvas.width / 2, 540 + yOffset);

    // Data
    const today = new Date().toLocaleDateString('pt-MZ');
    ctx.fillStyle = '#CCCCCC';
    ctx.font = '24px Inter, sans-serif';
    ctx.fillText(`Data: ${today}`, canvas.width / 2, 620 + yOffset);

    // Escola
    ctx.fillStyle = '#FFD700';
    ctx.font = 'bold 28px Inter, sans-serif';
    ctx.fillText('Escola Secund√°ria de Inhamissa', canvas.width / 2, 700);
    ctx.fillStyle = '#FFFFFF';
    ctx.font = '22px Inter, sans-serif';
    ctx.fillText('Xai-Xai, Gaza, Mo√ßambique', canvas.width / 2, 740);

    // Converter canvas para imagem e fazer download
    canvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `certificado-${displayQuizName}-${today.replace(/\//g, '-')}.png`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', () => {
    initProgressBars();
    loadCustomQuizzes();
    renderDynamicQuizzes();

    const addQuizBtn = document.getElementById('add-quiz-btn');
    if (addQuizBtn) {
        addQuizBtn.addEventListener('click', showAddQuizModal);
    }
});
</script>
</body>
</html>